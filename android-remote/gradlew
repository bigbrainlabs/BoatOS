#!/bin/sh
# Gradle wrapper script

# Determine the directory of this script
APP_HOME=$(dirname "$0")
APP_HOME=$(cd "$APP_HOME" && pwd -P)

# Download gradle if needed
GRADLE_VERSION=8.2
GRADLE_HOME="$HOME/.gradle/wrapper/dists/gradle-$GRADLE_VERSION-bin"

if [ ! -d "$GRADLE_HOME" ]; then
    echo "Downloading Gradle $GRADLE_VERSION..."
    mkdir -p "$GRADLE_HOME"
    curl -L "https://services.gradle.org/distributions/gradle-$GRADLE_VERSION-bin.zip" -o "/tmp/gradle.zip"
    unzip -q "/tmp/gradle.zip" -d "$GRADLE_HOME"
    rm "/tmp/gradle.zip"
fi

GRADLE_BIN=$(find "$GRADLE_HOME" -name "gradle" -type f -executable | head -1)

if [ -z "$GRADLE_BIN" ]; then
    GRADLE_BIN="$GRADLE_HOME/gradle-$GRADLE_VERSION/bin/gradle"
fi

exec "$GRADLE_BIN" "$@"
